{{- if .remoteContainer -}}
#!/bin/env bash

set -eu

if [ "$(command -v app)" ]; then
    bash <(curl -sL https://hkdb.github.io/app/getapp.sh)
fi

# Starship
if [ ! $(command -v starship) ]; then
    sh <(curl -LsSf https://starship.rs/install.sh) --bin-dir $HOME/.local/bin --yes
fi

# Atuin
if [ ! $(command -v atuin) ]; then
    ATUIN_UNMANAGED_INSTALL="$HOME/.local/bin"
    export ATUIN_UNMANAGED_INSTALL
    sh <(curl -LsSf  https://github.com/atuinsh/atuin/releases/latest/download/atuin-installer.sh)
    unset ATUIN_UNMANAGED_INSTALL
fi

# Ble.sh
if [ ! $(command -v ble) ]; then
    # Download nightly
    curl -LO https://github.com/akinomyoga/ble.sh/releases/download/nightly/ble-nightly.tar.xz
    # Unpack
    tar xJf ble-nightly.tar.xz
    # Install
    bash ble-nightly/ble.sh --install ~/.local/share
fi
{{- end -}}
